/*!
 * Tatami-rails-adaptor v0.1.0
 * 
 *
 * Copyright 2013, 2014 Ourairyu, http://ourai.ws/
 *
 * Date: 2014-07-29
 */

(function(){var a,b,c,d,e,f,g,h,i,j,k;k=this.Turbolinks&&this.Turbolinks.supported===!0,f=new Tatami.__class__.Storage("pageHandlers"),b=void 0,j=function(a){return a.replace("-","_")},e=function(a){return a.toString().length.toString(16)+""},d=function(a,b,c,d){var e,g;return g=f.get(""+b+"."+a+"."+d),e=this.equal(c,g)},a=function(a,b,c,g){var h;return h={},this.each(b,function(b){return function(f,i){var k;return g&&(c=f,f=i),null==f&&(f="unspecified"),f=j(f),k=e(c),d.apply(b,[a,f,c,k])?void 0:(b.namespace(h,""+f+"."+a+"."+k),h[f][a][k]=c)}}(this)),f.set(h)},h=function(a,b){return this.each(a,function(a){return b&&b(),a()})},g=function(a){return this.each(["unspecified",c(!0)],function(b){return function(c){return h.call(b,f.storage[c][a])}}(this))},i=function(a,b,c){return this.each(a,function(a,d){return c&&(b=a,a=d),$("body").is("[data-page='"+a+"']")?(b(),!1):void 0})},c=function(a){var b;return b=$("body").data("page"),a===!0?j(b):b},Tatami.extend({handlers:[{name:"inPage",handler:function(b,d){var e,f,g;return f=this.isPlainObject(b),1!==arguments.length||f?(this.isString(b)&&(b=[b]),e=[b,d,f],k?(e.unshift("init"),a.apply(this,e)):i.apply(this,e)):(this.isArray(b)||(b=[b]),g=this.inArray(c(),b)>-1),g||!1},validator:function(a){return this.isString(a)||this.isArray(a)||this.isPlainObject(a)},value:!1}]}),k&&(Tatami.mixin({prepare:function(c){a.call(this,"prepare",[b],c)},ready:function(c){a.call(this,"ready",[b],c)}}),Tatami.init({runSandbox:function(){return $(document).on({"page:change":function(a){return function(){var d;return console.log("change"),d=c(!0),h.call(a,f.storage[d].init,function(){return b=d}),g.call(a,"prepare")}}(this),"page:load":function(a){return function(){return console.log("load"),g.call(a,"ready")}}(this)})}}))}).call(this);
//# sourceMappingURL=tatami-rails-adaptor.min.map